<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jahizyah - Subjects list</title>
    <link rel="stylesheet" href="css/style22.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
   
</head>

<body>
    <!-- Navigation Bar -->
      <nav>
        <div class="container nav-container">
            <div class="logo">
                <div class="logo-icon" >
                    <img src="../../images/Jahizyah.png" alt="Jahizyah Logo" class="logo-image">
                </div>
                <span>Jahizyah</span>
            </div>
            <ul class="nav-links">
                <li><a href="Main-stu.html"><i class="fas fa-home"></i> Home </a></li>
                <li><a href="about-s.html"><i class="fas fa-info-circle"></i> About Us</a></li>
                <li><a href="progress.html"><i class="fas fa-chart-line"></i> Progress</a></li>
                <li><a href="contact-s.html"><i class="fas fa-envelope"></i> Contact Us</a></li>
                   <li><a href="setting-stu.html"><i class="fas fa-cog"></i>setting </a></li>
            </ul>
        </div>
    </nav>


    <!-- Page Content -->
    <div class="container">
        <!-- Search Bar -->
        <div class="search-container">
            <input type="text" class="search-bar" placeholder="Search subjects...">
            <div class="search-icon">
                <i class="fas fa-search"></i>
            </div>
        </div>

        <!-- Subjects Container -->
        <div class="units-container" id="subjects-container">
            <!-- Loading spinner -->
            <div id="loading-spinner" style="text-align: center; padding: 20px;">
                <i class="fas fa-spinner fa-spin fa-2x"></i>
                <p>Loading subjects...</p>
            </div>
        </div>
    </div>

<footer>
        <div class="footer-content">
                </div>
                <span>Jahizyah</span>
            <div class="footer-links">
                <a href="Main-stu.html">Home</a>
                <a href="about-s.html">About Us</a>
                <a href="contact-s.html">Contact</a>
            </div>
            
            <p class="copyright">Â© 2025 Jahizyah Educational Platform. All Rights Reserved.</p>
        </div>
    </footer>

    <script>
        const firebaseConfig = {
  apiKey: "AIzaSyAI30r2_rI6vsuoaZIvzZQkauZ0d7KlhwI",
  authDomain: "infohive-fda92.firebaseapp.com",
  projectId: "infohive-fda92",
  storageBucket: "infohive-fda92.firebasestorage.com",
  messagingSenderId: "938794496627",
  appId: "1:938794496627:web:467f85ce9e035a2136b006",
  measurementId: "G-TE8QT8BVD5"
};
        
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // Function to create subject card
        function createSubjectCard(subject, docId) {
    return `
    <div class="unit-card" data-id="${docId}">
        <div class="unit-header">
            <div class="unit-icon">
                <i class="fas fa-book"></i>
            </div>
            <h3 class="unit-title">${subject.name || 'No Title'}</h3>
        </div>
        <div class="unit-content">
            <p class="unit-description">${subject.description || 'No description available'}</p>
        </div>
        <div class="unit-footer">
            <button class="start-btn" onclick="viewSubject('${subject.name.toLowerCase()}')">
                View Content <i class="fas fa-arrow-right"></i>
            </button>
        </div>
    </div>`;
}
        // Function to load subjects with real-time updates
        function loadSubjects() {
            const container = document.getElementById('subjects-container');
            const loadingSpinner = document.getElementById('loading-spinner');
            
            // Real-time listener
            db.collection("subjects").onSnapshot((querySnapshot) => {
                container.innerHTML = '';
                
                if (querySnapshot.empty) {
                    container.innerHTML = '<p class="no-subjects">No subjects available yet.</p>';
                    return;
                }
                
                querySnapshot.forEach((doc) => {
                    const subject = doc.data();
                    container.innerHTML += createSubjectCard(subject, doc.id);
                });
                
                // Initialize search after loading
                setupSearch();
                
            }, (error) => {
                console.error("Error loading subjects: ", error);
                container.innerHTML = '<p class="error-message">Error loading subjects. Please try again later.</p>';
            });
        }

        // Function to view subject content
        function viewSubject(subjectName) {
         const formattedName = subjectName.toLowerCase().replace(/\s+/g, '-');
         window.location.href = `Questions.html?subject=${formattedName}`;
        }

        // Search functionality
        function setupSearch() {
            const searchBar = document.querySelector('.search-bar');
            const cards = document.querySelectorAll('.unit-card');
            
            searchBar.addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase();
                
                cards.forEach(card => {
                    const title = card.querySelector('.unit-title').textContent.toLowerCase();
                    const description = card.querySelector('.unit-description').textContent.toLowerCase();
                    
                    if (title.includes(searchTerm) || description.includes(searchTerm)) {
                        card.style.display = 'flex';
                    } else {
                        card.style.display = 'none';
                    }
                });
            });
        }

        // Load subjects when page loads
        document.addEventListener('DOMContentLoaded', loadSubjects);
        
    </script>

    <style>
        .no-subjects, .error-message {
            text-align: center;
            padding: 40px;
            color: #666;
            font-size: 1.2em;
        }
    </style>
</body>
</html>